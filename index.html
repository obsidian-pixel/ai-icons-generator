<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Icon Generator</title>
<style>
/* Chrome, Safari, Edge, Opera */
*::-webkit-scrollbar {
  width: 4px;
  scrollbar-color: #00eeff;
}

*::-webkit-scrollbar-track {
  background: #000000;
}

*::-webkit-scrollbar-thumb {
  background: #00eeff;
  border-radius: 20px;
  box-shadow: 0 0 5px #16a085, 0 0 10px #16a085;
}

*::-webkit-scrollbar-thumb:hover {
  background: #00abd6;
  box-shadow: 0 0 10px #16a085, 0 0 20px #16a085;
}

*::-webkit-scrollbar-button {
  background: #888888;
  height: 12px;
  width: 12px;
}

/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: #00eeff #000000;
}

*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:#0a0a0f;color:#e4e4e7;min-height:100vh;padding:20px}
.container{max-width:1400px;margin:0 auto}
header{display:flex;justify-content:space-between;align-items:center;margin-bottom:40px}
h1{font-size:28px;font-weight:700;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.theme-toggle{background:#1a1a24;border:1px solid #2a2a3a;border-radius:8px;padding:8px 16px;color:#e4e4e7;cursor:pointer;transition:.3s}
.theme-toggle:hover{background:#2a2a3a}
.upload-zone{background:#1a1a24;border:2px dashed #2a2a3a;border-radius:16px;padding:60px 20px;text-align:center;cursor:pointer;transition:.3s;margin-bottom:30px}
.upload-zone:hover{border-color:#667eea;background:#1f1f2e}
.upload-zone.dragover{border-color:#667eea;background:#2a2a3a}
.upload-icon{font-size:48px;margin-bottom:16px}
input[type=file]{display:none}
.controls{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px;background:#1a1a24;padding:24px;border-radius:16px}
.control-group{display:flex;flex-direction:column;gap:8px}
label{font-size:13px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:#a1a1aa}
select,input[type=color]{background:#0a0a0f;border:1px solid #2a2a3a;border-radius:8px;padding:10px;color:#e4e4e7;font-size:14px;width:100%}
input[type=color]{height:44px;cursor:pointer}
.generate-btn{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border:none;border-radius:8px;padding:14px 32px;color:#fff;font-size:16px;font-weight:600;cursor:pointer;transition:.3s;grid-column:1/-1}
.generate-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(102,126,234,.4)}
.generate-btn:disabled{opacity:.5;cursor:not-allowed;transform:none}
.processing{text-align:center;padding:40px;display:none}
.spinner{width:48px;height:48px;border:4px solid #2a2a3a;border-top-color:#667eea;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 16px}
@keyframes spin{to{transform:rotate(360deg)}}
.icons-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:16px;margin-bottom:30px}
.icon-card{background:#1a1a24;border:2px solid #2a2a3a;border-radius:12px;padding:20px;text-align:center;cursor:pointer;transition:.3s;position:relative}
.icon-card:hover{border-color:#667eea;transform:translateY(-4px)}
.icon-card.selected{border-color:#667eea;background:#1f1f2e}
.icon-svg{width:80px;height:80px;margin:0 auto 12px}
.icon-label{font-size:12px;color:#a1a1aa}
.preview{background:#1a1a24;border-radius:16px;padding:32px;text-align:center;margin-bottom:30px;display:none}
.preview-icon{width:200px;height:200px;margin:0 auto 24px}
.export-options{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
.export-btn{background:#2a2a3a;border:1px solid #3a3a4a;border-radius:8px;padding:10px 20px;color:#e4e4e7;cursor:pointer;transition:.3s;font-size:14px}
.export-btn:hover{background:#3a3a4a}
body.light{background:#f4f4f5;color:#18181b}
body.light .upload-zone,body.light .controls,body.light .icon-card,body.light .preview{background:#fff;border-color:#e4e4e7}
body.light .theme-toggle,body.light select,body.light input[type=color],body.light .export-btn{background:#fff;border-color:#e4e4e7;color:#18181b}
body.light .upload-zone:hover{border-color:#667eea;background:#fafafa}
body.light .spinner{border-color:#e4e4e7;border-top-color:#667eea}
body.light label,body.light .icon-label{color:#71717a}
</style>
</head>
<body>
<div class="container">
<header>
<h1>‚ú® AI Icon Generator</h1>
<button class="theme-toggle" onclick="toggleTheme()">üåô Dark Mode</button>
</header>

<div class="upload-zone" id="uploadZone">
<div class="upload-icon">üì∏</div>
<p style="font-size:18px;font-weight:600;margin-bottom:8px">Upload Your Sketch or Image</p>
<p style="color:#a1a1aa;font-size:14px">Drag & drop or click to browse</p>
<input type="file" id="fileInput" accept="image/*">
</div>

<div class="controls">
<div class="control-group">
<label>Primary Color</label>
<input type="color" id="colorPrimary" value="#667eea">
</div>
<div class="control-group">
<label>Icon Style</label>
<select id="styleSelect">
<option value="minimal">Minimal</option>
<option value="geometric">Geometric</option>
<option value="rounded">Rounded</option>
<option value="sharp">Sharp</option>
</select>
</div>
<div class="control-group">
<label>Complexity</label>
<select id="complexitySelect">
<option value="simple">Simple</option>
<option value="medium" selected>Medium</option>
<option value="detailed">Detailed</option>
</select>
</div>
<button class="generate-btn" id="generateBtn" onclick="generateIcons()">üé® Generate Icons</button>
</div>

<div class="processing" id="processing">
<div class="spinner"></div>
<p>AI is analyzing your image...</p>
</div>

<div class="icons-grid" id="iconsGrid"></div>

<div class="preview" id="preview">
<h2 style="margin-bottom:24px">Preview & Export</h2>
<div class="preview-icon" id="previewIcon"></div>
<div class="export-options">
<button class="export-btn" onclick="exportIcon('svg')">üì• Export SVG</button>
<button class="export-btn" onclick="exportIcon('css')">üìã Copy CSS</button>
<button class="export-btn" onclick="exportIcon('png')">üñºÔ∏è Export PNG</button>
</div>
</div>
</div>

<script>
let uploadedImage=null;
let selectedIcon=null;
let icons=[];
let imageColors=[];

const uploadZone=document.getElementById('uploadZone');
const fileInput=document.getElementById('fileInput');
const generateBtn=document.getElementById('generateBtn');

const iconTemplates=[
{name:'rocket',base:(c)=>`<path d="M50 10 L60 30 L50 25 L40 30 Z" fill="${c}"/><rect x="45" y="30" width="10" height="50" rx="2" fill="${c}"/><path d="M35 50 L45 55 L45 70 L35 65 Z" fill="${c}"/><path d="M65 50 L55 55 L55 70 L65 65 Z" fill="${c}"/><circle cx="50" cy="45" r="4" fill="#0a0a0f"/>`},
{name:'lightning',base:(c)=>`<path d="M55 10 L45 45 L55 45 L40 90 L60 50 L50 50 Z" fill="${c}"/>`},
{name:'shield',base:(c)=>`<path d="M50 15 L20 25 L20 50 Q20 75 50 85 Q80 75 80 50 L80 25 Z" fill="${c}"/><path d="M50 25 L30 32 L30 50 Q30 68 50 75 Q70 68 70 50 L70 32 Z" fill="#0a0a0f" opacity="0.3"/>`},
{name:'gear',base:(c)=>`<circle cx="50" cy="50" r="18" fill="${c}"/><circle cx="50" cy="50" r="10" fill="#0a0a0f"/><rect x="47" y="15" width="6" height="15" rx="2" fill="${c}"/><rect x="47" y="70" width="6" height="15" rx="2" fill="${c}"/><rect x="15" y="47" width="15" height="6" rx="2" fill="${c}"/><rect x="70" y="47" width="15" height="6" rx="2" fill="${c}"/>`},
{name:'star',base:(c)=>`<path d="M50 15 L57 40 L83 43 L64 60 L70 85 L50 72 L30 85 L36 60 L17 43 L43 40 Z" fill="${c}"/>`},
{name:'heart',base:(c)=>`<path d="M50 85 C25 65 15 50 15 38 C15 28 22 20 32 20 C40 20 46 25 50 30 C54 25 60 20 68 20 C78 20 85 28 85 38 C85 50 75 65 50 85 Z" fill="${c}"/>`},
{name:'location',base:(c)=>`<path d="M50 15 C35 15 25 27 25 40 C25 58 50 85 50 85 C50 85 75 58 75 40 C75 27 65 15 50 15 Z" fill="${c}"/><circle cx="50" cy="40" r="10" fill="#0a0a0f"/>`},
{name:'bell',base:(c)=>`<path d="M50 20 L50 25 M30 65 L70 65 M35 70 Q35 80 50 80 Q65 80 65 70" stroke="${c}" stroke-width="3" fill="none"/><path d="M35 65 L35 45 Q35 30 50 30 Q65 30 65 45 L65 65 Z" fill="${c}"/>`},
{name:'cloud',base:(c)=>`<path d="M25 55 Q25 42 35 38 Q38 28 50 28 Q62 28 65 38 Q75 42 75 55 Q75 68 62 68 L38 68 Q25 68 25 55 Z" fill="${c}"/>`},
{name:'folder',base:(c)=>`<path d="M15 30 L15 75 L85 75 L85 35 L50 35 L45 30 Z" fill="${c}"/><path d="M15 30 L45 30 L50 35 L85 35 L85 40 L15 40 Z" fill="${c}" opacity="0.7"/>`},
{name:'home',base:(c)=>`<path d="M50 15 L85 45 L85 85 L60 85 L60 60 L40 60 L40 85 L15 85 L15 45 Z" fill="${c}"/>`},
{name:'user',base:(c)=>`<circle cx="50" cy="35" r="15" fill="${c}"/><path d="M25 85 Q25 60 50 60 Q75 60 75 85 Z" fill="${c}"/>`},
{name:'search',base:(c)=>`<circle cx="40" cy="40" r="20" fill="none" stroke="${c}" stroke-width="5"/><line x1="55" y1="55" x2="75" y2="75" stroke="${c}" stroke-width="5" stroke-linecap="round"/>`},
{name:'mail',base:(c)=>`<rect x="15" y="30" width="70" height="45" rx="4" fill="none" stroke="${c}" stroke-width="4"/><path d="M15 30 L50 55 L85 30" fill="none" stroke="${c}" stroke-width="4" stroke-linejoin="round"/>`},
{name:'camera',base:(c)=>`<rect x="20" y="35" width="60" height="45" rx="5" fill="${c}"/><circle cx="50" cy="57" r="12" fill="#0a0a0f"/><rect x="40" y="28" width="20" height="8" rx="2" fill="${c}"/>`},
{name:'lock',base:(c)=>`<rect x="30" y="50" width="40" height="35" rx="4" fill="${c}"/><path d="M35 50 L35 40 Q35 25 50 25 Q65 25 65 40 L65 50" fill="none" stroke="${c}" stroke-width="5"/><circle cx="50" cy="67" r="4" fill="#0a0a0f"/>`},
{name:'key',base:(c)=>`<circle cx="30" cy="50" r="15" fill="${c}"/><circle cx="30" cy="50" r="7" fill="#0a0a0f"/><rect x="40" y="47" width="35" height="6" fill="${c}"/><rect x="60" y="40" width="6" height="8" fill="${c}"/><rect x="70" y="40" width="6" height="8" fill="${c}"/>`},
{name:'sun',base:(c)=>`<circle cx="50" cy="50" r="15" fill="${c}"/><line x1="50" y1="15" x2="50" y2="25" stroke="${c}" stroke-width="4" stroke-linecap="round"/><line x1="50" y1="75" x2="50" y2="85" stroke="${c}" stroke-width="4" stroke-linecap="round"/><line x1="15" y1="50" x2="25" y2="50" stroke="${c}" stroke-width="4" stroke-linecap="round"/><line x1="75" y1="50" x2="85" y2="50" stroke="${c}" stroke-width="4" stroke-linecap="round"/><line x1="25" y1="25" x2="32" y2="32" stroke="${c}" stroke-width="4" stroke-linecap="round"/><line x1="68" y1="68" x2="75" y2="75" stroke="${c}" stroke-width="4" stroke-linecap="round"/><line x1="75" y1="25" x2="68" y2="32" stroke="${c}" stroke-width="4" stroke-linecap="round"/><line x1="32" y1="68" x2="25" y2="75" stroke="${c}" stroke-width="4" stroke-linecap="round"/>`},
{name:'moon',base:(c)=>`<path d="M60 20 Q40 25 40 50 Q40 75 60 80 Q75 75 80 60 Q80 40 65 30 Q70 25 60 20 Z" fill="${c}"/>`},
{name:'wifi',base:(c)=>`<circle cx="50" cy="75" r="5" fill="${c}"/><path d="M35 60 Q35 45 50 45 Q65 45 65 60" fill="none" stroke="${c}" stroke-width="4" stroke-linecap="round"/><path d="M25 45 Q25 30 50 30 Q75 30 75 45" fill="none" stroke="${c}" stroke-width="4" stroke-linecap="round"/><path d="M15 30 Q15 15 50 15 Q85 15 85 30" fill="none" stroke="${c}" stroke-width="4" stroke-linecap="round"/>`},
{name:'battery',base:(c)=>`<rect x="15" y="35" width="60" height="30" rx="4" fill="none" stroke="${c}" stroke-width="4"/><rect x="75" y="45" width="10" height="10" rx="2" fill="${c}"/><rect x="20" y="40" width="15" height="20" rx="2" fill="${c}"/><rect x="38" y="40" width="15" height="20" rx="2" fill="${c}"/>`},
{name:'globe',base:(c)=>`<circle cx="50" cy="50" r="30" fill="none" stroke="${c}" stroke-width="4"/><ellipse cx="50" cy="50" rx="12" ry="30" fill="none" stroke="${c}" stroke-width="3"/><line x1="20" y1="50" x2="80" y2="50" stroke="${c}" stroke-width="3"/><path d="M50 20 Q60 35 50 50 Q40 65 50 80" fill="none" stroke="${c}" stroke-width="3"/>`},
{name:'download',base:(c)=>`<path d="M50 20 L50 60" stroke="${c}" stroke-width="5" stroke-linecap="round"/><path d="M35 50 L50 65 L65 50" fill="none" stroke="${c}" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/><path d="M20 70 L20 80 L80 80 L80 70" fill="none" stroke="${c}" stroke-width="5" stroke-linecap="round"/>`},
{name:'upload',base:(c)=>`<path d="M50 65 L50 25" stroke="${c}" stroke-width="5" stroke-linecap="round"/><path d="M35 35 L50 20 L65 35" fill="none" stroke="${c}" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/><path d="M20 70 L20 80 L80 80 L80 70" fill="none" stroke="${c}" stroke-width="5" stroke-linecap="round"/>`},
{name:'refresh',base:(c)=>`<path d="M70 30 Q80 40 80 50 Q80 70 60 80 Q40 80 30 70 Q20 60 20 50 Q20 35 35 25" fill="none" stroke="${c}" stroke-width="5" stroke-linecap="round"/><path d="M65 15 L70 30 L55 25" fill="${c}"/>`},
{name:'trash',base:(c)=>`<rect x="30" y="40" width="40" height="45" rx="3" fill="${c}"/><rect x="25" y="30" width="50" height="8" rx="2" fill="${c}"/><rect x="45" y="20" width="10" height="10" rx="2" fill="${c}"/><line x1="40" y1="50" x2="40" y2="70" stroke="#0a0a0f" stroke-width="3" stroke-linecap="round"/><line x1="50" y1="50" x2="50" y2="70" stroke="#0a0a0f" stroke-width="3" stroke-linecap="round"/><line x1="60" y1="50" x2="60" y2="70" stroke="#0a0a0f" stroke-width="3" stroke-linecap="round"/>`},
{name:'bookmark',base:(c)=>`<path d="M30 15 L70 15 L70 85 L50 70 L30 85 Z" fill="${c}"/>`},
{name:'flag',base:(c)=>`<rect x="20" y="15" width="5" height="70" fill="${c}"/><path d="M25 15 L75 15 Q75 30 60 35 Q75 40 75 55 L25 55 Z" fill="${c}"/>`},
{name:'calendar',base:(c)=>`<rect x="20" y="25" width="60" height="55" rx="4" fill="${c}"/><rect x="20" y="40" width="60" height="5" fill="#0a0a0f"/><rect x="35" y="15" width="5" height="15" rx="2" fill="${c}"/><rect x="60" y="15" width="5" height="15" rx="2" fill="${c}"/>`},
{name:'clock',base:(c)=>`<circle cx="50" cy="50" r="30" fill="none" stroke="${c}" stroke-width="4"/><line x1="50" y1="50" x2="50" y2="30" stroke="${c}" stroke-width="4" stroke-linecap="round"/><line x1="50" y1="50" x2="65" y2="50" stroke="${c}" stroke-width="4" stroke-linecap="round"/><circle cx="50" cy="50" r="3" fill="${c}"/>`},
{name:'image',base:(c)=>`<rect x="15" y="20" width="70" height="60" rx="4" fill="${c}"/><circle cx="35" cy="40" r="8" fill="#0a0a0f"/><path d="M15 65 L35 45 L50 60 L65 45 L85 65 L85 75 Q85 80 80 80 L20 80 Q15 80 15 75 Z" fill="#0a0a0f" opacity="0.5"/>`},
{name:'video',base:(c)=>`<rect x="15" y="30" width="50" height="40" rx="4" fill="${c}"/><path d="M65 40 L85 30 L85 70 L65 60 Z" fill="${c}"/>`},
{name:'music',base:(c)=>`<path d="M40 70 Q30 75 30 65 Q30 55 40 60 L40 25" fill="none" stroke="${c}" stroke-width="5" stroke-linecap="round"/><path d="M60 60 Q50 65 50 55 Q50 45 60 50 L60 15" fill="none" stroke="${c}" stroke-width="5" stroke-linecap="round"/><path d="M40 25 L60 15" stroke="${c}" stroke-width="5" stroke-linecap="round"/>`},
{name:'microphone',base:(c)=>`<rect x="42" y="20" width="16" height="30" rx="8" fill="${c}"/><path d="M30 45 Q30 65 50 65 Q70 65 70 45" fill="none" stroke="${c}" stroke-width="4" stroke-linecap="round"/><line x1="50" y1="65" x2="50" y2="80" stroke="${c}" stroke-width="4" stroke-linecap="round"/><line x1="40" y1="80" x2="60" y2="80" stroke="${c}" stroke-width="4" stroke-linecap="round"/>`},
{name:'volume',base:(c)=>`<path d="M30 40 L45 40 L60 25 L60 75 L45 60 L30 60 Z" fill="${c}"/><path d="M70 35 Q80 45 70 55" fill="none" stroke="${c}" stroke-width="4" stroke-linecap="round"/><path d="M75 25 Q90 45 75 65" fill="none" stroke="${c}" stroke-width="4" stroke-linecap="round"/>`},
{name:'code',base:(c)=>`<path d="M35 30 L20 50 L35 70" fill="none" stroke="${c}" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/><path d="M65 30 L80 50 L65 70" fill="none" stroke="${c}" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/><line x1="55" y1="25" x2="45" y2="75" stroke="${c}" stroke-width="5" stroke-linecap="round"/>`},
{name:'terminal',base:(c)=>`<rect x="15" y="20" width="70" height="60" rx="4" fill="${c}"/><path d="M25 35 L35 45 L25 55" fill="none" stroke="#0a0a0f" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/><line x1="45" y1="55" x2="65" y2="55" stroke="#0a0a0f" stroke-width="3" stroke-linecap="round"/>`},
{name:'link',base:(c)=>`<path d="M40 35 L35 40 Q25 50 35 60 L40 65" fill="none" stroke="${c}" stroke-width="5" stroke-linecap="round"/><path d="M60 35 L65 40 Q75 50 65 60 L60 65" fill="none" stroke="${c}" stroke-width="5" stroke-linecap="round"/><line x1="40" y1="60" x2="60" y2="40" stroke="${c}" stroke-width="5" stroke-linecap="round"/>`},
{name:'eye',base:(c)=>`<path d="M15 50 Q30 30 50 30 Q70 30 85 50 Q70 70 50 70 Q30 70 15 50 Z" fill="none" stroke="${c}" stroke-width="4"/><circle cx="50" cy="50" r="12" fill="${c}"/><circle cx="50" cy="50" r="6" fill="#0a0a0f"/>`},
{name:'message',base:(c)=>`<rect x="15" y="25" width="70" height="45" rx="6" fill="${c}"/><path d="M40 70 L50 80 L60 70" fill="${c}"/>`},
{name:'phone',base:(c)=>`<rect x="30" y="15" width="40" height="70" rx="6" fill="${c}"/><rect x="35" y="20" width="30" height="55" rx="2" fill="#0a0a0f" opacity="0.3"/><circle cx="50" cy="79" r="3" fill="#0a0a0f"/>`},
{name:'chart',base:(c)=>`<rect x="20" y="50" width="10" height="30" fill="${c}"/><rect x="37" y="40" width="10" height="40" fill="${c}"/><rect x="54" y="30" width="10" height="50" fill="${c}"/><rect x="71" y="25" width="10" height="55" fill="${c}"/>`},
{name:'database',base:(c)=>`<ellipse cx="50" cy="25" rx="30" ry="10" fill="${c}"/><path d="M20 25 L20 75 Q20 85 50 85 Q80 85 80 75 L80 25" fill="${c}"/><ellipse cx="50" cy="50" rx="30" ry="10" fill="none" stroke="#0a0a0f" stroke-width="2"/>`},
{name:'server',base:(c)=>`<rect x="20" y="20" width="60" height="18" rx="3" fill="${c}"/><rect x="20" y="41" width="60" height="18" rx="3" fill="${c}"/><rect x="20" y="62" width="60" height="18" rx="3" fill="${c}"/><circle cx="30" cy="29" r="2" fill="#0a0a0f"/><circle cx="30" cy="50" r="2" fill="#0a0a0f"/><circle cx="30" cy="71" r="2" fill="#0a0a0f"/>`},
{name:'cpu',base:(c)=>`<rect x="30" y="30" width="40" height="40" rx="2" fill="${c}"/><rect x="38" y="38" width="24" height="24" rx="1" fill="#0a0a0f"/><line x1="20" y1="35" x2="30" y2="35" stroke="${c}" stroke-width="3"/><line x1="20" y1="50" x2="30" y2="50" stroke="${c}" stroke-width="3"/><line x1="20" y1="65" x2="30" y2="65" stroke="${c}" stroke-width="3"/><line x1="70" y1="35" x2="80" y2="35" stroke="${c}" stroke-width="3"/><line x1="70" y1="50" x2="80" y2="50" stroke="${c}" stroke-width="3"/><line x1="70" y1="65" x2="80" y2="65" stroke="${c}" stroke-width="3"/>`},
{name:'shopping',base:(c)=>`<path d="M25 30 L30 70 L70 70 L75 30 Z" fill="${c}"/><path d="M35 30 Q35 20 50 20 Q65 20 65 30" fill="none" stroke="${c}" stroke-width="4"/><circle cx="38" cy="78" r="4" fill="${c}"/><circle cx="62" cy="78" r="4" fill="${c}"/>`},
{name:'gift',base:(c)=>`<rect x="25" y="45" width="50" height="40" rx="3" fill="${c}"/><rect x="20" y="35" width="60" height="12" rx="2" fill="${c}"/><path d="M50 35 Q40 25 35 25 Q30 25 30 30 Q30 35 40 35 L50 35" fill="${c}"/><path d="M50 35 Q60 25 65 25 Q70 25 70 30 Q70 35 60 35 L50 35" fill="${c}"/><rect x="48" y="35" width="4" height="50" fill="#0a0a0f"/>`},
{name:'trophy',base:(c)=>`<path d="M30 25 L30 35 Q25 45 35 50" fill="none" stroke="${c}" stroke-width="4"/><path d="M70 25 L70 35 Q75 45 65 50" fill="none" stroke="${c}" stroke-width="4"/><path d="M35 20 L35 45 Q35 60 50 65 Q65 60 65 45 L65 20 Z" fill="${c}"/><rect x="30" y="15" width="40" height="8" rx="2" fill="${c}"/><path d="M45 65 L45 75 L55 75 L55 65" fill="${c}"/><rect x="40" y="75" width="20" height="6" rx="2" fill="${c}"/>`},
{name:'medal',base:(c)=>`<circle cx="50" cy="60" r="20" fill="${c}"/><path d="M35 20 L40 40 L50 35 L60 40 L65 20 Z" fill="${c}"/><path d="M40 40 L50 60" stroke="${c}" stroke-width="3"/><path d="M60 40 L50 60" stroke="${c}" stroke-width="3"/><circle cx="50" cy="60" r="12" fill="#0a0a0f" opacity="0.3"/>`}
];

uploadZone.onclick=()=>fileInput.click();

uploadZone.addEventListener('dragover',e=>{
e.preventDefault();
uploadZone.classList.add('dragover');
});

uploadZone.addEventListener('dragleave',()=>{
uploadZone.classList.remove('dragover');
});

uploadZone.addEventListener('drop',e=>{
e.preventDefault();
uploadZone.classList.remove('dragover');
if(e.dataTransfer.files.length)handleFile(e.dataTransfer.files[0]);
});

fileInput.addEventListener('change',e=>{
if(e.target.files.length)handleFile(e.target.files[0]);
});

function handleFile(file){
if(!file.type.startsWith('image/'))return;
const reader=new FileReader();
reader.onload=e=>{
uploadedImage=e.target.result;
uploadZone.innerHTML=`<img src="${e.target.result}" style="max-width:200px;border-radius:8px"><p style="margin-top:12px;color:#a1a1aa">Image uploaded! Click Generate Icons</p>`;
generateBtn.disabled=false;
analyzeImage(e.target.result);
};
reader.readAsDataURL(file);
}

function analyzeImage(imgSrc){
const img=new Image();
img.onload=()=>{
const canvas=document.createElement('canvas');
canvas.width=100;
canvas.height=100;
const ctx=canvas.getContext('2d');
ctx.drawImage(img,0,0,100,100);
const data=ctx.getImageData(0,0,100,100).data;
const colors=[];
for(let i=0;i<data.length;i+=800){
const r=data[i],g=data[i+1],b=data[i+2];
if(r+g+b>80&&r+g+b<650)colors.push(`rgb(${r},${g},${b})`);
}
imageColors=colors.slice(0,15);
};
img.src=imgSrc;
}

function generateIcons(){
document.getElementById('processing').style.display='block';
document.getElementById('iconsGrid').innerHTML='';
document.getElementById('preview').style.display='none';
icons=[];

setTimeout(()=>{
const userColor=document.getElementById('colorPrimary').value;
const style=document.getElementById('styleSelect').value;
const complexity=document.getElementById('complexitySelect').value;

const shuffled=[...iconTemplates].sort(()=>Math.random()-0.5);

for(let i=0;i<Math.min(50,shuffled.length);i++){
const template=shuffled[i];
const color=imageColors[i%imageColors.length]||userColor;
const svg=createStyledIcon(template,color,style,complexity,i);
icons.push({type:template.name,svg,color,style});
displayIcon(svg,template.name,i);
}

document.getElementById('processing').style.display='none';
},2000);
}

function createStyledIcon(template,color,style,complexity,index){
let svg=`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">`;
let baseIcon=template.base(color);

if(style==='rounded'){
baseIcon=baseIcon.replace(/rx="\d+"/g,'rx="8"');
if(complexity==='detailed'){
svg+=`<circle cx="${20+index*3}" cy="${20+index*2}" r="3" fill="${color}" opacity="0.5"/>`;
svg+=`<circle cx="${80-index*2}" cy="${80-index*3}" r="4" fill="${color}" opacity="0.4"/>`;
}
}else if(style==='geometric'){
if(complexity!=='simple'){
svg+=`<rect x="10" y="10" width="15" height="15" fill="${color}" opacity="0.2" transform="rotate(${index*10} 17.5 17.5)"/>`;
svg+=`<rect x="75" y="75" width="15" height="15" fill="${color}" opacity="0.2" transform="rotate(${-index*10} 82.5 82.5)"/>`;
}
baseIcon=baseIcon.replace(/rx="\d+"/g,'rx="0"');
}else if(style==='sharp'){
baseIcon=baseIcon.replace(/rx="\d+"/g,'rx="0"');
if(complexity==='detailed'){
svg+=`<polygon points="15,15 20,10 25,15 20,20" fill="${color}" opacity="0.3"/>`;
svg+=`<polygon points="85,85 90,80 95,85 90,90" fill="${color}" opacity="0.3"/>`;
}
}else{
if(complexity==='simple'){
baseIcon=baseIcon.split('/>').slice(0,2).join('/>')+'/>'; 
}
}

if(complexity==='detailed'){
const accentColor=imageColors[(index+5)%imageColors.length]||color;
svg+=`<circle cx="${30+index*4}" cy="15" r="2" fill="${accentColor}" opacity="0.6"/>`;
svg+=`<circle cx="${70-index*3}" cy="85" r="2" fill="${accentColor}" opacity="0.6"/>`;
}

svg+=baseIcon;
svg+=`</svg>`;
return svg;
}

function displayIcon(svg,type,index){
const card=document.createElement('div');
card.className='icon-card';
card.innerHTML=`<div class="icon-svg">${svg}</div><div class="icon-label">${type}</div>`;
card.onclick=()=>selectIcon(index,card);
document.getElementById('iconsGrid').appendChild(card);
}

function selectIcon(index,card){
document.querySelectorAll('.icon-card').forEach(c=>c.classList.remove('selected'));
card.classList.add('selected');
selectedIcon=icons[index];
document.getElementById('preview').style.display='block';
document.getElementById('previewIcon').innerHTML=selectedIcon.svg;
}

function exportIcon(format){
if(!selectedIcon)return;

if(format==='svg'){
const blob=new Blob([selectedIcon.svg],{type:'image/svg+xml'});
const url=URL.createObjectURL(blob);
const a=document.createElement('a');
a.href=url;
a.download=`${selectedIcon.type}.svg`;
a.click();
}else if(format==='css'){
const css=`background-image: url('data:image/svg+xml,${encodeURIComponent(selectedIcon.svg)}');`;
navigator.clipboard.writeText(css);
alert('CSS copied to clipboard!');
}else if(format==='png'){
const canvas=document.createElement('canvas');
canvas.width=canvas.height=512;
const ctx=canvas.getContext('2d');
ctx.fillStyle='transparent';
ctx.fillRect(0,0,512,512);
const img=new Image();
img.onload=()=>{
ctx.drawImage(img,0,0,512,512);
canvas.toBlob(blob=>{
const url=URL.createObjectURL(blob);
const a=document.createElement('a');
a.href=url;
a.download=`${selectedIcon.type}.png`;
a.click();
});
};
img.src='data:image/svg+xml,'+encodeURIComponent(selectedIcon.svg);
}
}

function toggleTheme(){
document.body.classList.toggle('light');
const btn=document.querySelector('.theme-toggle');
btn.textContent=document.body.classList.contains('light')?'‚òÄÔ∏è Light Mode':'üåô Dark Mode';
}

generateBtn.disabled=true;
</script>
</body>
</html>
